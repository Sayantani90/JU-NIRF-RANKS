<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jadavpur University â€” NIRF Ranks Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    // Add smooth scrolling for better UX
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });
    
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin: 0; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: #2c3e50; 
      min-height: 100vh;
    }
    
    .header {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      color: white;
      padding: 2rem 0;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    
    .header h1 {
      font-size: 2.5rem;
      font-weight: 300;
      letter-spacing: -0.5px;
      margin-bottom: 0.5rem;
    }
    
    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    
    .input-section { 
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .input-section h3 {
      color: #2c3e50;
      margin-bottom: 1.5rem;
      font-size: 1.3rem;
      font-weight: 600;
    }
    
    .input-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
    }
    
    .input-group label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #34495e;
      font-size: 0.9rem;
    }
    
    .input-section input { 
      padding: 0.75rem;
      border: 2px solid #e1e8ed;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #f8f9fa;
    }
    
    .input-section input:focus {
      outline: none;
      border-color: #3498db;
      background: white;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }
    
    button { 
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      color: white; 
      border: none; 
      padding: 0.75rem 2rem; 
      border-radius: 8px; 
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }
    
    button:hover { 
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .download-btn {
      background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
    }
    
    .download-btn:hover {
      box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
    }
    
    .button-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    @media (max-width: 480px) {
      .button-group {
        flex-direction: column;
      }
      
      .button-group button {
        width: 100%;
      }
    }
    
    .table-container {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }
    
    table { 
      border-collapse: collapse; 
      width: 100%; 
      background-color: white;
    }
    
    th, td { 
      padding: 1rem 0.75rem; 
      text-align: center; 
      border-bottom: 1px solid #ecf0f1;
    }
    
    th { 
      background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
      color: white;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 0.85rem;
    }
    
    tbody tr {
      transition: all 0.2s ease;
    }
    
    tbody tr:hover { 
      background-color: #f8f9fa;
      transform: scale(1.001);
    }
    
    tbody tr:nth-child(even) {
      background-color: #fcfcfd;
    }
    
    td:first-child {
      font-weight: 600;
      text-align: left;
      padding-left: 1.5rem;
      color: #2c3e50;
    }
    
    .charts { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 2rem; 
    }
    
    .chart-container { 
      flex: 1; 
      min-width: 400px; 
      background: white; 
      padding: 2rem; 
      border-radius: 15px; 
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .chart-container h3 {
      margin-bottom: 1.5rem;
      color: #2c3e50;
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }
    
    .legend { 
      margin-top: 1.5rem; 
      font-size: 0.9rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.75rem;
      background: #f8f9fa;
      border-radius: 20px;
      font-weight: 500;
    }
    
    .legend span { 
      display: inline-block; 
      width: 16px; 
      height: 16px; 
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .stat-card {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      text-align: center;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .stat-card h4 {
      color: #7f8c8d;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .stat-card .number {
      font-size: 2rem;
      font-weight: 700;
      color: #2980b9;
      margin-bottom: 0.25rem;
    }
    
    .stat-card .subtitle {
      font-size: 0.8rem;
      color: #95a5a6;
    }
    
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8rem;
      }
      
      .input-grid {
        grid-template-columns: 1fr;
      }
      
      .chart-container {
        min-width: 300px;
      }
      
      .container {
        padding: 1rem;
      }
      
      table {
        font-size: 0.85rem;
      }
      
      th, td {
        padding: 0.5rem 0.25rem;
      }
    }
    
    .fade-in {
      animation: fadeIn 0.6s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Jadavpur University</h1>
    <p>NIRF Rankings Dashboard</p>
  </div>

  <div class="container">
    <div class="stats-grid">
      <div class="stat-card">
        <h4>Best Overall Rank</h4>
        <div class="number">12</div>
        <div class="subtitle">2017, 2020, 2022</div>
      </div>
      <div class="stat-card">
        <h4>Best University Rank</h4>
        <div class="number">4</div>
        <div class="subtitle">2022, 2023</div>
      </div>
      <div class="stat-card">
        <h4>Best Engineering Rank</h4>
        <div class="number">9</div>
        <div class="subtitle">2017</div>
      </div>
      <div class="stat-card">
        <h4>State Public University</h4>
        <div class="number">2</div>
        <div class="subtitle">2024</div>
      </div>
    </div>

    <div class="input-section fade-in">
      <h3>ðŸ“Š Enter 2025 Rankings</h3>
      <div class="input-grid">
        <div class="input-group">
          <label for="Overall-2025">Overall Ranking</label>
          <input type="number" id="Overall-2025" placeholder="Enter rank..." />
        </div>
        <div class="input-group">
          <label for="University-2025">University Ranking</label>
          <input type="number" id="University-2025" placeholder="Enter rank..." />
        </div>
        <div class="input-group">
          <label for="Engineering-2025">Engineering Ranking</label>
          <input type="number" id="Engineering-2025" placeholder="Enter rank..." />
        </div>
        <div class="input-group">
          <label for="Research-2025">Research Ranking</label>
          <input type="number" id="Research-2025" placeholder="Enter rank..." />
        </div>
        <div class="input-group">
          <label for="Pharmacy-2025">Pharmacy Ranking</label>
          <input type="number" id="Pharmacy-2025" placeholder="Enter rank..." />
        </div>
        <div class="input-group">
          <label for="StatePublicUniversity-2025">State Public University</label>
          <input type="number" id="StatePublicUniversity-2025" placeholder="Enter rank..." />
        </div>
        <div class="input-group">
          <label for="Architecture-2025">Architecture Ranking</label>
          <input type="number" id="Architecture-2025" placeholder="Enter rank..." />
        </div>
      </div>
      <div class="button-group">
        <button onclick="update2025()">ðŸš€ Update Rankings</button>
        <button onclick="downloadChart()" class="download-btn">ðŸ“¥ Download Chart as JPEG</button>
      </div>
    </div>

    <div class="table-container fade-in">
      <table id="ranksTable">
        <thead>
          <tr>
            <th>Category</th>
            <th>2025</th>
            <th>2024</th>
            <th>2023</th>
            <th>2022</th>
            <th>2021</th>
            <th>2020</th>
            <th>2019</th>
            <th>2018</th>
            <th>2017</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Overall</td><td id="Overall-2025-cell">â€”</td><td>17</td><td>13</td><td>12</td><td>14</td><td>12</td><td>13</td><td>13</td><td>12</td></tr>
          <tr><td>University</td><td id="University-2025-cell">â€”</td><td>9</td><td>4</td><td>4</td><td>8</td><td>5</td><td>6</td><td>6</td><td>5</td></tr>
          <tr><td>Engineering</td><td id="Engineering-2025-cell">â€”</td><td>12</td><td>10</td><td>11</td><td>17</td><td>17</td><td>14</td><td>12</td><td>9</td></tr>
          <tr><td>Research</td><td id="Research-2025-cell">â€”</td><td>21</td><td>19</td><td>13</td><td>17</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr>
          <tr><td>Pharmacy</td><td id="Pharmacy-2025-cell">â€”</td><td>18</td><td>18</td><td>18</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr>
          <tr><td>State Public University</td><td id="StatePublicUniversity-2025-cell">â€”</td><td>2</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr>
          <tr><td>Architecture</td><td id="Architecture-2025-cell">â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td></tr>
        </tbody>
      </table>
    </div>

    <div class="charts fade-in">
      <div class="chart-container">
        <h3>ðŸ“ˆ NIRF JU Rankings Trend Analysis</h3>
        <canvas id="nirfChart"></canvas>
        <div class="legend">
          <div class="legend-item">
            <span style="background-color: #e74c3c"></span>
            Overall
          </div>
          <div class="legend-item">
            <span style="background-color: #3498db"></span>
            University
          </div>
          <div class="legend-item">
            <span style="background-color: #2ecc71"></span>
            Engineering
          </div>
          <div class="legend-item">
            <span style="background-color: #9b59b6"></span>
            Research
          </div>
          <div class="legend-item">
            <span style="background-color: #f39c12"></span>
            Pharmacy
          </div>
          <div class="legend-item">
            <span style="background-color: #1abc9c"></span>
            State Public University
          </div>
          <div class="legend-item">
            <span style="background-color: #8b4513"></span>
            Architecture
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const labels = [2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024];

    const data = {
      labels: [...labels],
      datasets: [
        { label: 'Overall', data: [12, 13, 13, 12, 14, 12, 13, 17], borderColor: '#e74c3c', backgroundColor: 'rgba(231, 76, 60, 0.1)', fill: false, tension: 0.4 },
        { label: 'University', data: [5, 6, 6, 5, 8, 4, 4, 9], borderColor: '#3498db', backgroundColor: 'rgba(52, 152, 219, 0.1)', fill: false, tension: 0.4 },
        { label: 'Engineering', data: [9, 12, 14, 17, 17, 11, 10, 12], borderColor: '#2ecc71', backgroundColor: 'rgba(46, 204, 113, 0.1)', fill: false, tension: 0.4 },
        { label: 'Research', data: [null, null, null, null, 17, 13, 19, 21], borderColor: '#9b59b6', backgroundColor: 'rgba(155, 89, 182, 0.1)', fill: false, tension: 0.4 },
        { label: 'Pharmacy', data: [null, null, null, null, null, 18, 18, 18], borderColor: '#f39c12', backgroundColor: 'rgba(243, 156, 18, 0.1)', fill: false, tension: 0.4 },
        { label: 'State Public University', data: [null, null, null, null, null, null, null, 2], borderColor: '#1abc9c', backgroundColor: 'rgba(26, 188, 156, 0.1)', fill: false, tension: 0.4 },
        { label: 'Architecture', data: [null, null, null, null, null, null, null, null], borderColor: '#8b4513', backgroundColor: 'rgba(139, 69, 19, 0.1)', fill: false, tension: 0.4 }
      ]
    };

    const config = {
      type: 'line',
      data: data,
      options: {
        responsive: true,
        plugins: { 
          legend: { display: false },
          tooltip: {
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(0,0,0,0.8)',
            titleColor: '#fff',
            bodyColor: '#fff',
            cornerRadius: 8
          }
        },
        scales: {
          y: {
            reverse: true,
            title: { 
              display: true, 
              text: 'Rank',
              font: { size: 14, weight: '600' },
              color: '#2c3e50'
            },
            grid: {
              color: 'rgba(0,0,0,0.05)'
            }
          },
          x: {
            title: {
              display: true,
              text: 'Year',
              font: { size: 14, weight: '600' },
              color: '#2c3e50'
            },
            grid: {
              color: 'rgba(0,0,0,0.05)'
            }
          }
        },
        interaction: {
          mode: 'nearest',
          axis: 'x',
          intersect: false
        }
      }
    };

    const chart = new Chart(document.getElementById('nirfChart'), config);

    function update2025() {
      const categories = ['Overall','University','Engineering','Research','Pharmacy','StatePublicUniversity','Architecture'];
      let updated = false;
      
      categories.forEach((cat, idx) => {
        const inputVal = document.getElementById(cat + '-2025').value;
        const cell = document.getElementById(cat + '-2025-cell');
        
        if (inputVal) {
          cell.innerText = inputVal;
          cell.style.background = 'linear-gradient(135deg, #2ecc71, #27ae60)';
          cell.style.color = 'white';
          cell.style.fontWeight = '600';
          
          if (!data.labels.includes(2025)) {
            data.labels.push(2025);
          }
          
          // Update or add 2025 data
          if (data.datasets[idx].data.length === labels.length) {
            data.datasets[idx].data.push(parseInt(inputVal));
          } else {
            data.datasets[idx].data[data.datasets[idx].data.length - 1] = parseInt(inputVal);
          }
          updated = true;
        } else {
          if (data.datasets[idx].data.length === labels.length) {
            data.datasets[idx].data.push(null);
          }
        }
      });
      
      if (updated) {
        chart.update();
        
        // Show success feedback
        const button = event.target;
        const originalText = button.innerHTML;
        button.innerHTML = 'âœ… Updated!';
        button.style.background = 'linear-gradient(135deg, #2ecc71, #27ae60)';
        
        setTimeout(() => {
          button.innerHTML = originalText;
          button.style.background = 'linear-gradient(135deg, #3498db 0%, #2980b9 100%)';
        }, 2000);
      }
    }

    function downloadChart() {
      // Get the existing chart canvas
      const originalCanvas = document.getElementById('nirfChart');
      
      // Create a new canvas for the download with higher resolution
      const downloadCanvas = document.createElement('canvas');
      const ctx = downloadCanvas.getContext('2d');
      
      // Set canvas size for high quality output
      downloadCanvas.width = 1200;
      downloadCanvas.height = 800;
      
      // Fill with white background
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, downloadCanvas.width, downloadCanvas.height);
      
      // Add header text
      ctx.fillStyle = '#1e3c72';
      ctx.font = 'bold 32px Arial, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Jadavpur University - NIRF Rankings', downloadCanvas.width / 2, 50);
      
      ctx.fillStyle = '#2a5298';
      ctx.font = '20px Arial, sans-serif';
      ctx.fillText('Trend Analysis', downloadCanvas.width / 2, 85);
      
      // Calculate the chart area
      const chartArea = {
        x: 80,
        y: 120,
        width: downloadCanvas.width - 160,
        height: downloadCanvas.height - 200
      };
      
      // Draw chart background
      ctx.fillStyle = '#f8f9fa';
      ctx.fillRect(chartArea.x, chartArea.y, chartArea.width, chartArea.height);
      
      // Copy the original chart to the download canvas
      try {
        ctx.drawImage(originalCanvas, chartArea.x + 40, chartArea.y + 20, chartArea.width - 80, chartArea.height - 100);
      } catch (error) {
        console.log('Direct copy failed, using alternative method');
        // Alternative: Get chart as base64 image
        const chartImage = chart.toBase64Image('image/jpeg', 1);
        const img = new Image();
        img.onload = function() {
          ctx.drawImage(img, chartArea.x + 40, chartArea.y + 20, chartArea.width - 80, chartArea.height - 100);
          triggerDownload();
        };
        img.src = chartImage;
        return;
      }
      
      triggerDownload();
      
      function triggerDownload() {
        // Convert to blob and download
        downloadCanvas.toBlob(function(blob) {
          const url = URL.createObjectURL(blob);
          const downloadLink = document.createElement('a');
          const date = new Date();
          downloadLink.href = url;
          downloadLink.download = `JU_NIRF_Rankings_${date.getFullYear()}_${String(date.getMonth() + 1).padStart(2, '0')}_${String(date.getDate()).padStart(2, '0')}.jpg`;
          
          // Trigger download
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
          
          // Clean up
          URL.revokeObjectURL(url);
          
          // Show success feedback
          const button = document.querySelector('.download-btn');
          const originalText = button.innerHTML;
          button.innerHTML = 'âœ… Downloaded!';
          button.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
          
          setTimeout(() => {
            button.innerHTML = originalText;
            button.style.background = 'linear-gradient(135deg, #2ecc71 0%, #27ae60 100%)';
          }, 2000);
        }, 'image/jpeg', 0.95);
      }
    }
  </script>
</body>
</html>
